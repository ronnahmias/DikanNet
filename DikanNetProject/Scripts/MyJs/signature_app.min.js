var wrapper=document.getElementById("signature-pad"),clearButton=wrapper.querySelector("[data-action=clear]"),savePNGButton=wrapper.querySelector("[data-action=save-png]"),canvas=wrapper.querySelector("canvas"),signaturePad=new SignaturePad(canvas,{backgroundColor:"rgb(255, 255, 255)"});function resizeCanvas(){var e=Math.max(window.devicePixelRatio||1,1);canvas.width=canvas.offsetWidth*e,canvas.height=250,canvas.getContext("2d").scale(e,e),console.log("Resize Canvas"),console.log("Width: "+canvas.width),console.log("Height: "+canvas.height),console.log("ratio: "+e),signaturePad.clear()}function download(e,a){if(-1<navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"))window.open(e);else{var t=dataURLToBlob(e),n=window.URL.createObjectURL(t),o=document.createElement("a");o.style="display: none",o.href=n,o.download=a,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(n)}}function dataURLToBlob(e){for(var a=e.split(";base64,"),t=a[0].split(":")[1],n=window.atob(a[1]),o=n.length,r=new Uint8Array(o),i=0;i<o;++i)r[i]=n.charCodeAt(i);return new Blob([r],{type:t})}(window.onresize=resizeCanvas)(),clearButton.addEventListener("click",function(e){signaturePad.clear()}),savePNGButton.addEventListener("click",function(e){if(signaturePad.isEmpty())alert("Please provide a signature first.");else{var a=signaturePad.toDataURL();$.ajax({url:"/Student/SaveSignature",dataType:"text",data:{pDataUri:a},method:"POST",success:function(){return alert("Success"),!0},error:function(e,a,t){return alert("Failed"),console.log(e.status),console.log(t),!1}})}});