@model DikanNetProject.Models.UserLogin

@{
    Layout = "~/Views/Login/_Layout.cshtml";
    ViewBag.Title = "דיקאנט";
    ViewBag.Message = "ברוכים הבאים לדיקאנט";
    ViewBag.ModelTitle = "שגיאה";
    ViewBag.ModelMessageBody = "תעודת זהות או סיסמא שגויים,<br/>אנא נסה שוב.";
}


@using (Html.BeginForm("Login","Login",new { ReturnUrl = ViewBag.ReturnUrl },FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="row container-fluid">
        @ViewBag.Name
        <div class="row col-12 form-group justify-content-center text-center">
            @Html.LabelFor(model => model.UserName, htmlAttributes: new { @class = "col-sm-12 col-md-3 col-lg-2 col-xl-2" })
            <div class="col-sm-12 col-md-8 col-lg-6 col-xl-4">
                @Html.EditorFor(model => model.UserName, new { htmlAttributes = new { @class = "form-control only-numbers",maxlength="9", placeholder= Html.DisplayNameFor(s=>s.UserName), pattern="[0-9]{9}", id=@Html.NameFor(m => m.UserName) ,type="text" ,name=@Html.NameFor(m => m.UserName)} })
            </div>
        </div>
        <div class="row col-12 form-group justify-content-center text-center ">
            @Html.LabelFor(model => model.Password, htmlAttributes: new { @class = "col-sm-12 col-md-3 col-lg-2 col-xl-2" })
            <div class="input-group col-md-8 col-lg-6 col-xl-4">
                @Html.EditorFor(model => model.Password, new { htmlAttributes = new { @class = "form-control", placeholder = Html.DisplayNameFor(s => s.Password), id = @Html.NameFor(m => m.Password), type = "password", name = @Html.NameFor(m => m.Password) } })
                <div class="input-group-append review-password">
                    <span class="input-group-text">&#x1F441;</span>
                </div>
            </div>
        </div>

        <div class="col-sm-12 col-md-11 col-lg-10 col-xl-9 form-check text-left mb-2">
            @Html.EditorFor(model => model.RememberMe, new { htmlAttributes = new { @class = "form-check-input", type = "checkbox", style="margin-right: -20px;" } })
            @Html.LabelFor(model => model.RememberMe, htmlAttributes: new { @class = "form-check-label" })
        </div>

        <div class="col-sm-12 col-md-11 col-lg-10 col-xl-9 form-check text-left mb-2">
            <button type="submit" class="btn btn-primary" onclick="return checkValid()">התחבר</button>
        </div>
    </div>

    <div class="container text-center">
        <div class="row mb-2">
            <div class="col-lg-3 col-xl-4"></div>
            <div class="col-sm-12 col-md-12 col-lg-3 col-xl-2">
                <span>*פעם ראשונה?</span>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-3 col-xl-3">
                @Html.ActionLink("להרשמה", "Registration", null, new { @class = "btn btn-primary", type = "button", id = "Registration" })
                <br />
                <span class="text-danger" style="font-size:15px;" hidden>*ההרשמה למערכת הינה לסטודנטים מן המניין</span>
            </div>
            <div class="col-lg-3 col-xl-3"></div>
        </div>

        <div class="row ">
            <div class="col-lg-3 col-xl-4"></div>
            <div class="col-sm-12 col-md-12 col-lg-3 col-xl-2">
                <span>לא מצליחים להתחבר?</span>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-3 col-xl-3">
                @Html.ActionLink("שכחתי סיסמא", "ForgotPass", null, new { @class = "btn btn-primary", type = "button", id = "forgotPass" })
            </div>
            <div class="col-lg-3 col-xl-3">
            </div>
        </div>
    </div>
}

<script>
    //login
    function checkValid() {
        var id = $('#UserName').val();
        var pass = $('#Password').val();
        if (!(validId(id) && validPassword(pass)))
            { 
                $('#responseModal').modal('show');
                return false;
        }
        return true;
        
    };
</script>
